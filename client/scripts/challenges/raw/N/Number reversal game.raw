Number reversal game

{{task|Games}}

;Task:
Given a jumbled list of the numbers '''1''' to '''9''' that are definitely ''not'' in 
ascending order.

Show the list, &nbsp; and then ask the player how many digits from the 
left to reverse. 

Reverse those digits, &nbsp; then ask again, &nbsp; until all the digits end up in ascending order.


The score is the count of the reversals needed to attain the ascending order.


Note: Assume the player's input does not need extra validation.


;Related tasks:
* &nbsp; [[Sorting algorithms/Pancake sort]]
* &nbsp; [[wp:Pancake sorting|Pancake sorting]].
* &nbsp; [[Topswops]]
<br><br>


=={{header|JavaScript}}==
Use <code>knuth_shuffle()</code> function from [[Knuth shuffle#JavaScript|here]].

<lang html4strict><html>
<head>
    <title>Number Reversal Game</title>
</head>
 
<body>
<div id="start"></div>
<div id="progress"></div>
<div id="score"></div>
<script type="text/javascript"></lang>
<lang javascript>function endGame(progress) {
    var scoreId = progress.scoreId,
        result = 'You took ' + progress.count + ' attempts to put the digits in order!';
    if (progress.abort === true) {
        result = 'Game aborted.';
    }
    document.getElementById(scoreId).innerHTML = result;
}

function reverseFirstN(arr, n) {
    var reversed = arr.slice(0, n).reverse();
    return reversed.concat(arr.slice(n));
}

function isSorted(arr) {
    return arr.slice(0).sort().toString() === arr.toString();
}

function gameLoop(progress) {
    if (isSorted(progress.arr)) {
        endGame(progress);
    } else {
        var n = parseInt(window.prompt('How many elements to reverse?', ''), 10);
        if (isNaN(n)) {
            progress.abort = true;
        } else {
            progress.arr = reverseFirstN(progress.arr, n);
            progress.innerHTML += '<p>' + progress.arr + '</p>';
            progress.count += 1;
        }
        if (progress.abort !== true) {
            // allow window to repaint before next guess
            setTimeout(function () {
                gameLoop(progress);
            }, 1);
        }
    }
}

function knuth_shuffle(a) {
    var n = a.length,
        r,
        temp;
    while (n > 1) {
        r = Math.floor(n * Math.random());
        n -= 1;
        temp = a[n];
        a[n] = a[r];
        a[r] = temp;
    }
    return a;
}

function playGame(startId, progressId, scoreId) {
    var progress = document.getElementById(progressId);
    progress.arr = knuth_shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9]);
    document.getElementById(startId).innerHTML = '<p>' + progress.arr.toString() + '</p>';

    progress.count = 0;
    progress.scoreId = scoreId;

    // allow window to repaint before prompting for a guess
    setTimeout(function () {
        gameLoop(progress);
    }, 1);
}

playGame('start', 'progress', 'score');</lang>
<lang html4strict></script>
</body>
</html></lang>

