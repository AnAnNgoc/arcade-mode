XML/XPath

{{task|XML}}

Perform the following three XPath queries on the XML Document below:
* Retrieve the first "item" element
* Perform an action on each "price" element (print it out)
* Get an array of all the "name" elements

XML Document:
 <inventory title="OmniCorp Store #45x10^3">
   <section name="health">
     <item upc="123456789" stock="12">
       <name>Invisibility Cream</name>
       <price>14.50</price>
       <description>Makes you invisible</description>
     </item>
     <item upc="445322344" stock="18">
       <name>Levitation Salve</name>
       <price>23.99</price>
       <description>Levitate yourself for up to 3 hours per application</description>
     </item>
   </section>
   <section name="food">
     <item upc="485672034" stock="653">
       <name>Blork and Freen Instameal</name>
       <price>4.95</price>
       <description>A tasty meal in a tablet; just add water</description>
     </item>
     <item upc="132957764" stock="44">
       <name>Grob winglets</name>
       <price>3.56</price>
       <description>Tender winglets of Grob. Just add water</description>
     </item>
   </section>
 </inventory>

=={{header|JavaScript}}==
{{works with|Firefox|2.0}}
<lang javascript>//create XMLDocument object from file
var xhr = new XMLHttpRequest();
xhr.open('GET', 'file.xml', false);
xhr.send(null);
var doc = xhr.responseXML;

//get first <item> element
var firstItem = doc.evaluate( '//item[1]', doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null ).singleNodeValue;
alert( firstItem.textContent );

//output contents of <price> elements
var prices = doc.evaluate( '//price', doc, null, XPathResult.ANY_TYPE, null );
for( var price = prices.iterateNext(); price != null; price = prices.iterateNext() ) {
  alert( price.textContent );
}

//add <name> elements to array
var names = doc.evaluate( '//name', doc, null, XPathResult.ANY_TYPE, null);
var namesArray = [];
for( var name = names.iterateNext(); name != null; name = names.iterateNext() ) {
  namesArray.push( name );
}
alert( namesArray );</lang>

Although some browsers support XPath, working with XML is much easier with E4X.

<lang javascript>//create XML object from file
var xhr = new XMLHttpRequest();
xhr.open('GET', 'file.xml', false);
xhr.send(null);
var doc = new XML(xhr.responseText);

//get first <item> element
var firstItem = doc..item[0];
alert( firstItem );

//output contents of <price> elements
for each( var price in doc..price ) {
  alert( price );
}

//add <name> elements to array
var names = [];
for each( var name in doc..name ) {
  names.push( name );
}
alert( names );</lang>


